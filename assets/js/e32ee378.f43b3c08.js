"use strict";(self.webpackChunkhtml=self.webpackChunkhtml||[]).push([[56],{3905:(t,n,e)=>{e.d(n,{Zo:()=>d,kt:()=>m});var a=e(7294);function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,a)}return e}function o(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?i(Object(e),!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function c(t,n){if(null==t)return{};var e,a,r=function(t,n){if(null==t)return{};var e,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)e=i[a],n.indexOf(e)>=0||(r[e]=t[e]);return r}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)e=i[a],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(r[e]=t[e])}return r}var l=a.createContext({}),s=function(t){var n=a.useContext(l),e=n;return t&&(e="function"==typeof t?t(n):o(o({},n),t)),e},d=function(t){var n=s(t.components);return a.createElement(l.Provider,{value:n},t.children)},u="mdxType",p={inlineCode:"code",wrapper:function(t){var n=t.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(t,n){var e=t.components,r=t.mdxType,i=t.originalType,l=t.parentName,d=c(t,["components","mdxType","originalType","parentName"]),u=s(e),g=r,m=u["".concat(l,".").concat(g)]||u[g]||p[g]||i;return e?a.createElement(m,o(o({ref:n},d),{},{components:e})):a.createElement(m,o({ref:n},d))}));function m(t,n){var e=arguments,r=n&&n.mdxType;if("string"==typeof t||r){var i=e.length,o=new Array(i);o[0]=g;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=t,c[u]="string"==typeof t?t:r,o[1]=c;for(var s=2;s<i;s++)o[s]=e[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,e)}g.displayName="MDXCreateElement"},7791:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>s});var a=e(7462),r=(e(7294),e(3905));const i={sidebar_position:6},o="T\u1ea1o Loading Reducer",c={unversionedId:"loading-reducer",id:"loading-reducer",title:"T\u1ea1o Loading Reducer",description:"- \u1ede v\xed d\u1ee5 tr\u01b0\u1edbc v\u1ec1 Redux Thunk, ta \u0111\xe3 bi\u1ebft c\xe1ch t\u1ea1o ra c\xe1c thunk actions ch\u1ee9a c\xe1c \u0111o\u1ea1n code b\u1ea5t \u0111\u1ed3ng b\u1ed9 \u0111\u1ec3 g\u1ecdi API, sau \u0111\xf3 d\xf9ng builder.addCase() \u0111\u1ec3 c\u1eadp nh\u1eadt state cho store. V\u1edbi m\u1ed7i thunk action, ta c\u1ea7n m\u1ed9t thu\u1ed9c t\xednh trong state (v\xed d\u1ee5 nh\u01b0 isLoading ) \u0111\u1ec3 ki\u1ec3m tra xem \u0111ang trong qu\xe1 tr\xecnh g\u1ecdi API hay kh\xf4ng. V\xed d\u1ee5:",source:"@site/docs/loading-reducer.md",sourceDirName:".",slug:"/loading-reducer",permalink:"/redux-toolkit/loading-reducer",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"V\xed d\u1ee5 v\u1ec1 Redux thunk",permalink:"/redux-toolkit/redux-thunk-example"}},l={},s=[],d={toc:s},u="wrapper";function p(t){let{components:n,...e}=t;return(0,r.kt)(u,(0,a.Z)({},d,e,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"t\u1ea1o-loading-reducer"},"T\u1ea1o Loading Reducer"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u1ede v\xed d\u1ee5 tr\u01b0\u1edbc v\u1ec1 Redux Thunk, ta \u0111\xe3 bi\u1ebft c\xe1ch t\u1ea1o ra c\xe1c thunk actions ch\u1ee9a c\xe1c \u0111o\u1ea1n code b\u1ea5t \u0111\u1ed3ng b\u1ed9 \u0111\u1ec3 g\u1ecdi API, sau \u0111\xf3 d\xf9ng ",(0,r.kt)("inlineCode",{parentName:"li"},"builder.addCase()")," \u0111\u1ec3 c\u1eadp nh\u1eadt state cho store. V\u1edbi m\u1ed7i thunk action, ta c\u1ea7n m\u1ed9t thu\u1ed9c t\xednh trong state (v\xed d\u1ee5 nh\u01b0 ",(0,r.kt)("strong",{parentName:"li"},"isLoading")," ) \u0111\u1ec3 ki\u1ec3m tra xem \u0111ang trong qu\xe1 tr\xecnh g\u1ecdi API hay kh\xf4ng. V\xed d\u1ee5:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { createSlice } from "@reduxjs/toolkit";\nimport * as taskThunkActions from "./thunk-actions";\nimport type { ITask } from "../../interfaces/task-interface";\n\ninterface ITaskState {\n  taskList: ITask[];\n  isLoading: boolean;\n}\n\nconst initialState: ITaskState = {\n  taskList: [],\n  isLoading: false,\n};\n\nconst taskSlice = createSlice({\n  name: "task",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(taskThunkActions.getAllTasks.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(taskThunkActions.getAllTasks.fulfilled, (state, action) => {\n        state.taskList = action.payload;\n        state.isLoading = false;\n      });\n  },\n});\n\nexport default taskSlice;\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"V\u1ea5n \u0111\u1ec1 \u0111\u1eb7t ra")," : v\u1edbi m\u1ed7i slice n\u1ebfu c\xf3 thunk actions th\xec ta l\u1ea1i ph\u1ea3i th\xeam thu\u1ed9c t\xednh ",(0,r.kt)("inlineCode",{parentName:"p"},"isLoading")," \u0111\u1ec3 ki\u1ec3m tra xem c\xf3 \u0111ang trong qu\xe1 tr\xecnh g\u1ecdi API hay kh\xf4ng, \u0111i\u1ec1u n\xe0y g\xe2y s\u1ef1 l\u1eb7p l\u1ea1i kh\xf4ng c\u1ea7n thi\u1ebft. Thay v\xe0o \u0111\xf3, ta s\u1ebd t\u1ea1o m\u1ed9t slice m\u1edbi l\xe0 ",(0,r.kt)("strong",{parentName:"p"},"loadingSlice")," , d\xf9ng \u0111\u1ec3 ki\u1ec3m tra tr\u1ea1ng th\xe1i ",(0,r.kt)("strong",{parentName:"p"},"loading")," c\u1ee7a t\u1ea5t c\u1ea3 c\xe1c thunk actions trong app.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"V\xec khi dispatch m\u1ed9t thunk action th\xec c\xf3 3 action type t\u01b0\u01a1ng \u1ee9ng v\u1edbi 3 action \u0111\u01b0\u1ee3c ph\xe1t ra: ",(0,r.kt)("strong",{parentName:"p"},"pending")," , ",(0,r.kt)("strong",{parentName:"p"},"fulfilled")," /",(0,r.kt)("strong",{parentName:"p"},"rejected")," , n\xean ta s\u1ebd d\u1ef1a v\xe0o ki\u1ec3u c\u1ee7a 3 action n\xe0y \u0111\u1ec3 quy\u1ebft \u0111\u1ecbnh xem m\u1ed9t thunk action li\u1ec7u c\xf3 \u0111ang \u1edf tr\u1ea1ng th\xe1i ",(0,r.kt)("strong",{parentName:"p"},"loading")," hay kh\xf4ng.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { AnyAction, createSlice } from "@reduxjs/toolkit";\n\nconst initialState: { [key: string]: boolean } = {};\n\nconst loadingSlice = createSlice({\n  name: "loading",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addMatcher(\n      (action: AnyAction) => action.type.includes("/pending"),\n      (state, action) => {\n        state[action.type.split("/pending")[0]] = true;\n      }\n    );\n    builder.addMatcher(\n      (action: AnyAction) => action.type.includes("/fulfilled"),\n      (state, action: AnyAction) => {\n        state[action.type.split("/fulfilled")[0]] = false;\n      }\n    );\n    builder.addMatcher(\n      (action: AnyAction) => action.type.includes("/rejected"),\n      (state, action: AnyAction) => {\n        state[action.type.split("/rejected")[0]] = false;\n      }\n    );\n  },\n});\n\nexport default loadingSlice;\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"L\xfac n\xe0y, ta c\xf3 th\u1ec3 d\u1ec5 d\xe0ng l\u1ea5y ra tr\u1ea1ng th\xe1i ",(0,r.kt)("strong",{parentName:"li"},"loading")," c\u1ee7a m\u1ed9t thunk action th\xf4ng qua t\xean c\u1ee7a n\xf3:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"const { isGettingAllTasks } = useAppSelector((state) => ({\n  isGettingAllTasks: state.loading[ETaskThunkActions.GET_ALL_TASKS],\n}));\n")))}p.isMDXComponent=!0}}]);