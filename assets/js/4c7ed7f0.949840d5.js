"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[589],{3429:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var s=n(4848),a=n(8453);const r={sidebar_position:5},i="V\xed d\u1ee5 v\u1ec1 Redux thunk",c={id:"redux-thunk-example",title:"V\xed d\u1ee5 v\u1ec1 Redux thunk",description:"- V\xed d\u1ee5 nh\u1ecf d\u01b0\u1edbi \u0111\xe2y m\xf4 t\u1ea3 vi\u1ec7c s\u1eed d\u1ee5ng Redux thunk s\u1eed d\u1ee5ng TypeScript",source:"@site/docs/redux-thunk-example.md",sourceDirName:".",slug:"/redux-thunk-example",permalink:"/redux-toolkit/redux-thunk-example",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Redux thunk",permalink:"/redux-toolkit/redux-thunk"},next:{title:"T\u1ea1o Loading Reducer",permalink:"/redux-toolkit/loading-reducer"}},o={},d=[];function l(t){const e={code:"code",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"v\xed-d\u1ee5-v\u1ec1-redux-thunk",children:"V\xed d\u1ee5 v\u1ec1 Redux thunk"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"V\xed d\u1ee5 nh\u1ecf d\u01b0\u1edbi \u0111\xe2y m\xf4 t\u1ea3 vi\u1ec7c s\u1eed d\u1ee5ng Redux thunk s\u1eed d\u1ee5ng TypeScript"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"1695969414268",src:n(3903).A+"",title:"C\xe2y th\u01b0 m\u1ee5c",width:"405",height:"798"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/interfaces/task-interface.ts"',children:"export interface ITask {\n  id: number;\n  name: string;\n  isCompleted: boolean;\n}\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/api/task-api.ts"',children:'import axios from "axios";\nimport { ITask } from "../interfaces/task-interface";\n\nexport const getAllTasks = async () => {\n  const { data } = await axios.get<ITask[]>(\n    "https://6404cc9280d9c5c7bad0e2f2.mockapi.io/api/v1/tasks"\n  );\n  return data;\n};\n\nexport const getTaskById = async (id: number) => {\n  const { data } = await axios.get<ITask>(\n    `https://6404cc9280d9c5c7bad0e2f2.mockapi.io/api/v1/tasks/${id}`\n  );\n  return data;\n};\n\nexport const updateTaskById = async (id: number, body: ITask) => {\n  const { data } = await axios.put<ITask>(\n    `https://6404cc9280d9c5c7bad0e2f2.mockapi.io/api/v1/tasks/${id}`,\n    body\n  );\n  return data;\n};\n\nexport const deleteTaskById = async (id: number) => {\n  const { data } = await axios.delete<ITask>(\n    `https://6404cc9280d9c5c7bad0e2f2.mockapi.io/api/v1/tasks/${id}`\n  );\n  return data;\n};\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/api/index.ts"',children:'import * as taskApi from "./task-api";\n\nexport { taskApi };\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/store/task/constants.ts"',children:'export enum ETaskThunkActions {\n  GET_ALL_TASKS = "GET_ALL_TASKS",\n  GET_TASK_BY_ID = "GET_TASK_BY_ID",\n  UPDATE_TASK_BY_ID = "UPUPDATE_TASK_BY_ID",\n  DELETE_TASK_BY_ID = "DELETE_TASK_BY_ID",\n}\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/store/task/thunk-actions.ts"',children:'import { createAsyncThunk } from "@reduxjs/toolkit";\nimport { ETaskThunkActions } from "./constants";\nimport { taskApi } from "../../api";\nimport { ITask } from "../../interfaces/task-interface";\n\nexport const getAllTasks = createAsyncThunk(\n  ETaskThunkActions.GET_ALL_TASKS,\n  async (_, { rejectWithValue }) => {\n    try {\n      const response = await taskApi.getAllTasks();\n      return response;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const getTaskById = createAsyncThunk(\n  ETaskThunkActions.GET_TASK_BY_ID,\n  async (id: number, { rejectWithValue }) => {\n    try {\n      const response = await taskApi.getTaskById(id);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const updateTaskById = createAsyncThunk(\n  ETaskThunkActions.UPDATE_TASK_BY_ID,\n  async (body: ITask, { rejectWithValue }) => {\n    try {\n      const response = await taskApi.updateTaskById(body.id, body);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n\nexport const deleteTaskById = createAsyncThunk(\n  ETaskThunkActions.DELETE_TASK_BY_ID,\n  async (id: number, { rejectWithValue }) => {\n    try {\n      const response = await taskApi.deleteTaskById(id);\n      return response;\n    } catch (error) {\n      return rejectWithValue(error);\n    }\n  }\n);\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/store/task/slice.ts"',children:'import { createSlice } from "@reduxjs/toolkit";\nimport * as taskThunkActions from "./thunk-actions";\nimport type { ITask } from "../../interfaces/task-interface";\n\ninterface ITaskState {\n  taskList: ITask[];\n}\n\nconst initialState: ITaskState = {\n  taskList: [],\n};\n\nconst taskSlice = createSlice({\n  name: "task",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(taskThunkActions.getAllTasks.fulfilled, (state, action) => {\n        state.taskList = action.payload;\n      })\n      .addCase(taskThunkActions.updateTaskById.fulfilled, (state, action) => {\n        const updatedTask = action.payload;\n        const newTaskList = state.taskList.map((task) =>\n          task.id === updatedTask.id ? updatedTask : task\n        );\n        state.taskList = newTaskList;\n      })\n      .addCase(taskThunkActions.deleteTaskById.fulfilled, (state, action) => {\n        const deletedTask = action.payload;\n        const newTaskList = state.taskList.filter(\n          (task) => task.id !== deletedTask.id\n        );\n        state.taskList = newTaskList;\n      });\n  },\n});\n\nexport default taskSlice;\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/store/task/index.ts"',children:'import taskSlice from "./slice";\nimport * as taskThunkActions from "./thunk-actions";\n\nconst taskActions = taskSlice.actions;\nconst taskReducer = taskSlice.reducer;\nexport { taskActions, taskThunkActions, taskReducer };\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",metastring:'title="src/store/index.ts"',children:'import { configureStore } from "@reduxjs/toolkit";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from "react-redux";\nimport { taskReducer } from "./task";\n\nexport const store = configureStore({\n  reducer: {\n    task: taskReducer,\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({ serializableCheck: false }),\n});\n\ntype AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Ta c\xf3 th\u1ec3 dispatch m\u1ed9t thunk action t\u1eeb m\u1ed9t component b\u1ea5t k\u1ef3 nh\u01b0 sau:"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"const dispatch = useAppDispatch();\n\ninterface ErrorResponse {\n  message: string;\n}\n\ntry {\n  //S\u1eed d\u1ee5ng ph\u01b0\u01a1ng th\u1ee9c unwrap() \u0111\u1ec3 l\u1ea5y d\u1eef li\u1ec7u tr\u1ea3 v\u1ec1 (n\u1ebfu c\xf3) khi th\u1ef1c hi\u1ec7n xong m\u1ed9t thunk action\n  const response = await dispatch(taskThunkActions.getAllTasks()).unwrap();\n} catch (e) {\n  const error = e as AxiosError<ErrorResponse>;\n  console.log(error.response?.data); // L\u1ea5y d\u1eef li\u1ec7u l\u1ed7i m\xe0 server tr\u1ea3 v\u1ec1\n}\n"})})]})}function u(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(l,{...t})}):l(t)}},3903:(t,e,n)=>{n.d(e,{A:()=>s});const s=n.p+"assets/images/1695969414268-537dbd5c4075a6c8d3ff05a11007c885.png"},8453:(t,e,n)=>{n.d(e,{R:()=>i,x:()=>c});var s=n(6540);const a={},r=s.createContext(a);function i(t){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:i(t.components),s.createElement(r.Provider,{value:e},t.children)}}}]);